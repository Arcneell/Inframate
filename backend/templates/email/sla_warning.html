{% extends "base.html" %}

{% block header_subtitle %}<p class="header-subtitle">SLA Warning</p>{% endblock %}

{% block content %}
<h2>SLA Warning</h2>

<div class="alert alert-warning">
    <strong>Attention required!</strong> Ticket <strong>{{ ticket.ticket_number }}</strong> is approaching its SLA deadline.
</div>

<p>This ticket requires immediate attention to avoid an SLA breach.</p>

<div class="ticket-info">
    <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%">
        <tr>
            <td style="padding: 8px 0;">
                <span class="ticket-info-label">Ticket</span>
            </td>
            <td style="padding: 8px 0;">
                <span class="ticket-info-value">{{ ticket.ticket_number }}</span>
            </td>
        </tr>
        <tr>
            <td style="padding: 8px 0;">
                <span class="ticket-info-label">Title</span>
            </td>
            <td style="padding: 8px 0;">
                <span class="ticket-info-value">{{ ticket.title }}</span>
            </td>
        </tr>
        <tr>
            <td style="padding: 8px 0;">
                <span class="ticket-info-label">Status</span>
            </td>
            <td style="padding: 8px 0;">
                <span class="status-badge status-{{ ticket.status }}">{{ ticket.status }}</span>
            </td>
        </tr>
        <tr>
            <td style="padding: 8px 0;">
                <span class="ticket-info-label">Priority</span>
            </td>
            <td style="padding: 8px 0;">
                <span class="priority-badge priority-{{ ticket.priority }}">{{ ticket.priority }}</span>
            </td>
        </tr>
        {% if ticket.sla_due_date %}
        <tr>
            <td style="padding: 8px 0;">
                <span class="ticket-info-label">SLA Due</span>
            </td>
            <td style="padding: 8px 0;">
                <span class="ticket-info-value" style="color: #dc2626; font-weight: 600;">{{ ticket.sla_due_date | format_datetime }}</span>
            </td>
        </tr>
        {% endif %}
        {% if assigned_to %}
        <tr>
            <td style="padding: 8px 0;">
                <span class="ticket-info-label">Assigned To</span>
            </td>
            <td style="padding: 8px 0;">
                <span class="ticket-info-value">{{ assigned_to.username }}</span>
            </td>
        </tr>
        {% endif %}
        {% if requester %}
        <tr>
            <td style="padding: 8px 0;">
                <span class="ticket-info-label">Requester</span>
            </td>
            <td style="padding: 8px 0;">
                <span class="ticket-info-value">{{ requester.username }}</span>
            </td>
        </tr>
        {% endif %}
    </table>
</div>

<div class="button-container">
    <a href="{{ site_url }}/tickets?id={{ ticket.id }}" class="button">View Ticket Now</a>
</div>
{% endblock %}
